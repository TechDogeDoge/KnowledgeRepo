# 回溯算法

[TOC]

## 回溯算法思路

本质上回溯算法就是一种**最优的遍历多叉树**的算法，通过在每一个节点对所有可能的子节点进行遍历，达到遍历整个树的目的。

### 相关概念

<img src="C:\Users\jiaoy\AppData\Roaming\Typora\typora-user-images\image-20211107114221369.png" alt="image-20211107114221369" style="zoom:50%;" />

每一次调用backtrack函数都可以看做已经遍历到某一个节点上后，下一步遍历的操作。

如果此节点恰好是叶子节点，说明可以停止遍历，并且找到了一个解；

如果此节点不是叶子节点，通过遍历所有子节点，就可以遍历到下一层；

#### 结束条件

结束条件就是上面遍历到叶子节点的条件

#### 路径

路径就是到遍历到目前位置，从根节点到当前节点的路径

#### 选择列表

选择列表就是当前节点的子节点的列表



## 回溯算法框架

求所有可能解算法

```java
void backtrack(当前路径，路径选择列表，result) {
    if (满足结束条件) {
        result.add(当前路径)；
        return;
    }
    
    for (选择i : 路径选择列表) {
        选择i并更新路径
        backtrack(当前路径，路径列表，result)
        撤销选择i并更新路径
    }
}
```



求一个可能解算法，在遍历时，找到一个可行解就返回true，阻断后续的遍历

```java
bool backtrack(当前路径，路径选择列表，result) {
    if (满足结束条件) {
        result.add(当前路径)；
        return true;
    }
    
    for (选择i : 路径选择列表) {
        选择i并更新路径
        if (backtrack(当前路径，路径列表，result)) {
            return true;
        }
        撤销选择i并更新路径
    }
}
```

